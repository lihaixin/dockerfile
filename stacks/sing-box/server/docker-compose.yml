services:                                                                      # 配置多网口代理
 mproxy:                                                                       # 服务名称，这里取mproxy,代表多网卡多IP 
    image: "lihaixin/sing-box:${VERSION:-1.12.11}"                             # 镜像名称 https://hub.docker.com/r/lihaixin/sing-box
    restart: unless-stopped                                                    # unless-stopped  always 
    network_mode: "host"
    privileged: true                                                           # wg服务需要
    ulimits:
      nofile:
        soft: 65536
        hard: 65536
    environment:
      NO: "${USERNO:-0999202410241280008}"                                     # 授权NO,内部使用，未经授权，第二台设备用，授权码会自动禁止，不能再启用！！！
      LOG_Level: ${LOG_Level:-info}                                            # 日志级别，支持trace debug info warn error fatal panic
      DNS_ADDR: "${DNS_ADDR:-8.8.8.8}"                                         # 远程调用DNS查询地址
      TYPE: ${TYPE:-server_socks5}                                             # server_socks5 | server_ss | endpoint_wireguard
      SERVER: ${SERVER:-0.0.0.0}                                               # 落地socks5/ss/wg 代理IP 
      PORT: ${PORT:-10800}                                                     # 落地socks5/ss/wg 代理端口 
      USER: ${USER:-user}                                                      # 落地socks5/ss/wg 代理账号 或加密方式 2022-blake3-aes-128-gcm  xchacha20-ietf-poly1305 aes-256-gcm 或 客户端公钥
      PASSWD: ${PASSWD:-password}                                              # 落地socks5/ss 代理密码 或WG端私钥，请通过 sing-box generate wg-keypair 创建
      INTERFACE: ${INTERFACE:-ens5}                                            # 出口接口，支持ovpn这些虚拟口
    volumes:
      - singbox:/etc/sing-box
volumes:
  singbox:
